<!DOCTYPE html>
<html>
<head>
    <title>Real Estate Price Prediction</title>
</head>
<body>
    <h1>Real Estate Price Prediction</h1>

    <form action="/real_estate_price_prediction" method="POST">

        <label for="bed">Number of Bedrooms:</label>
        <input type="number" name="bed" placeholder="e.g., 3" required><br><br>

        <label for="bath">Number of Bathrooms:</label>
        <input type="number" name="bath" placeholder="e.g., 2" required><br><br>

        <label for="house_size">House Size (in Square Feet):</label>
        <input type="number" name="house_size" placeholder="e.g., 1500" required><br><br>

        <label for="acre_lot">Lot Size (in Acres):</label>
        <input type="number" name="acre_lot" placeholder="e.g., 0.5" step="0.01" required><br><br>

        <label for="zip_code">Zip Code:</label>
        <input type="number" name="zip_code" placeholder="e.g., 90210" required><br><br>

        <label for="status">Status:</label>
        <select name="status" required>
            <option value="for_sale">For Sale</option>
            <option value="ready_to_build">Ready to Build</option>
        </select><br><br>

        <label for="state">State:</label>
        <select name="state" id="state" required onchange="loadCities()">
            <option value="">Select a state</option>
            {% for state in states %}
                <option value="{{ state }}">{{ state }}</option>
            {% endfor %}
        </select><br><br>

        <label for="city">City:</label>
        <select name="city" id="city" required>
            <option value="">Select a city</option>
        </select><br><br>

        <input type="submit" value="Predict">
    </form>

    <script>
        function loadCities() {
            var state = document.getElementById("state").value;
            var cityDropdown = document.getElementById("city");

            cityDropdown.innerHTML = '<option value="">Select a city</option>';
            if (state) {
                fetch('/get_cities/' + state)
                    .then(response => response.json())
                    .then(data => {
                        data.forEach(function(city) {
                            var option = document.createElement("option");
                            option.value = city;
                            option.text = city;
                            cityDropdown.appendChild(option);
                        });
                    })
                    .catch(error => {
                        console.error('Error fetching cities:', error);
                    });
            }
        }
    </script>


    {% if prediction %}
        <hr>
        <h3>Input Values:</h3>
        <p>Number of Bedrooms: {{ params.bed }}  ,  Number of Bathrooms: {{ params.bath }} </p>
        <p>House Size (sq ft): {{ params.house_size }}  ,  Lot Size (ac): {{ params.acre_lot }}  ,  Status: {{ params.status }}</p>
        <p>Zip Code: {{ params.zip_code }}  ,  State: {{ params.state }}  ,  City: {{ params.city }} </p>
        <hr>    
        <h2>{{ prediction }}</h2>
    {% endif %}

</body>
</html>
